# config/trading_modes/balanced.yaml
# Сбалансированный режим — основной рабочий режим для большинства случаев
# Хороший баланс: достаточно сделок, умеренный риск, стабильный рост
# Подходит для:
# - депозита $5k–$50k
# - после 1–2 недель виртуального теста
# - когда winrate модели стабилизировался >55–60%

# Основные параметры риска и фильтра
risk:
  default_risk_pct: 1.0               # Риск на сделку — 1% (стандартный, разумный уровень)
  manual_prob_risk_levels:            # Ручные уровни — умеренная агрессия
    0.65: 0.7                         # ≥65% — 0.7%
    0.75: 1.0                         # ≥75% — 1.0%
    0.85: 1.5                         # ≥85% — 1.5%
    0.92: 2.0                         # ≥92% — 2.0% (сильные сигналы)
  risk_multiplier_enabled: true       # Включено — при prob >0.85 увеличиваем риск в 1.5 раза

# Фильтр сигналов (средний уровень строгости)
prob_threshold: 0.70                  # Минимальная вероятность от модели (70%+)
quiet_mode: true                      # Тихий режим включён (ловим ранние паттерны)
use_only_mixed_anomaly: false         # Все аномалии + тихий режим (CV не обязательно)
min_pr_threshold: 0.45                # PR > 0.45 — умеренный порог (баланс количества и качества)

# Управление позицией
soft_entry_enabled: true              # Мягкие входы включены — стандартная защита
soft_levels: [0.70, 0.80, 0.90]       # Нормальные пороги (70% → 80% → 90%)
soft_sizes: [0.35, 0.35, 0.30]        # 35% → 35% → 30% (равномерное наращивание)
soft_timeout: 7                       # 7 свечей на подтверждение следующей части

tp_mode: "dynamic_level"              # Динамический TP — на VAH/VAL или channel (лучше фиксирует)
sl_mode: "atr_chandelier"             # ATR-based SL — адаптивный, реже ложные выбивания
trailing_enabled: true                # Trailing включён — защищает профит
trailing_type: "distance"             # Distance — SL на % от high/low (надёжнее)
trailing_activation_pct: 0.6          # Активация при +0.6% (чувствительно)
trailing_distance_pct: 0.7            # SL на 0.7% от максимума (средний трейлинг)

# PR и фильтр монет
pr:
  mode: "normalized"                  # Normalized — штрафует за малое кол-во сделок
  min_deals_in_pr_period: 8           # Минимум 8 сделок в 250 свечах (разумный фильтр)
  min_pr_threshold: 0.45              # PR > 0.45 — достаточно для активации

# Дополнительные ограничения
max_open_positions: 3                 # Максимум 3 позиции одновременно (баланс риска)
max_daily_loss_pct: 4.0               # Авто-стоп на день при -4% от депозита
trading_hours_restriction: false      # Нет ограничения по времени (можно включить)

# Логи и мониторинг
logging:
  level: "INFO"                       # INFO — нормальный уровень информации