# config/trading_modes/conservative.yaml
# Консервативный режим — максимальная защита капитала, минимум ложных входов
# Подходит для:
# - первого запуска в реале
# - периода низкой волатильности
# - депозита до $5–10k
# - когда winrate модели ещё не стабилизировался >58–60%

# Основные параметры риска и фильтра
risk:
  default_risk_pct: 0.5               # Риск на сделку — 0.5% от депозита (initial или current)
  manual_prob_risk_levels:            # Ручные уровни — очень консервативно
    0.70: 0.3                         # Только при вероятности ≥70% — 0.3%
    0.80: 0.5                         # ≥80% — 0.5%
    0.90: 0.8                         # ≥90% — 0.8% (редко доходит)
  risk_multiplier_enabled: false      # Не увеличиваем риск при высокой вероятности

# Фильтр сигналов (очень строгий)
prob_threshold: 0.78                  # Минимальная вероятность от модели (78%+)
quiet_mode: false                     # Тихий режим полностью выключен (слишком мягкие сигналы)
use_only_mixed_anomaly: true          # Только CV-аномалии (самые сильные)
min_pr_threshold: 0.8                 # PR > 0.8 для активации монеты (очень высокий порог)

# Управление позицией
soft_entry_enabled: true              # Мягкие входы включены — снижают риск ложных
soft_levels: [0.80, 0.88, 0.95]       # Очень высокие пороги — только сильное подтверждение
soft_sizes: [0.4, 0.3, 0.3]           # 40% → 30% → 30% (медленное наращивание)

tp_mode: "dynamic_level"              # Динамический TP — на VAH/VAL или channel (лучше фиксирует)
sl_mode: "atr_chandelier"             # ATR-based SL — реже ложные выбивания
trailing_enabled: true                # Trailing включён — защищает профит
trailing_type: "distance"             # Distance — SL на % от high/low (надёжнее)
trailing_activation_pct: 0.8          # Активация при +0.8% (консервативно)
trailing_distance_pct: 0.5            # SL на 0.5% от максимума (плотный трейлинг)

# PR и фильтр монет
pr:
  mode: "normalized"                  # Normalized — штрафует за малое кол-во сделок
  min_deals_in_pr_period: 12          # Минимум 12 сделок в 250 свечах (строгий фильтр)
  min_pr_threshold: 0.8               # PR > 0.8 — только очень прибыльные конфиги

# Дополнительные ограничения
max_open_positions: 1                 # Максимум 1 позиция одновременно (очень консервативно)
max_daily_loss_pct: 2.0               # Авто-стоп на день при -2% от депозита
trading_hours_restriction: false      # Можно включить: торговать только в активные часы (например 8:00–20:00 UTC)

# Логи и мониторинг
logging:
  level: "INFO"                       # Только важные события (меньше шума в логах)