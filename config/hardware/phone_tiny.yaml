# config/hardware/phone_tiny.yaml
# Профиль для телефона (Redmi Note 12 Pro, 12 ГБ RAM, Dimensity 1080)
# Жёсткие ограничения, чтобы бот не убивал батарею и не перегревался
# Все параметры переопределяют default.yaml

# Основные лимиты железа
max_coins: 5                        # Максимум монет одновременно (5 — комфортный предел)
max_tf: 3                           # Максимум таймфреймов (1m, 5m, 15m — оптимально)
max_windows: 3                      # Максимум окон (24, 50, 74 — 100 слишком тяжёлое)
seq_len: 50                         # Длина последовательности (50 вместо 100 — в 2 раза легче)

# Производительность и энергосбережение
low_power_mode: true                # Включает все оптимизации для телефона
use_tiny_model: true                # Использовать tiny-версию модели (меньше hidden_size, слоёв)
quantization: "int8"                # Квантизация модели (ONNX int8 — inference в 3–4 раза быстрее)
inference_device: "cpu"             # cpu / nnapi (nnapi — Vulkan/NNAPI на Android, быстрее)

# Таймеры и частота (чтобы не убивать батарею)
quiet_mode: false                   # Тихий режим выключен по умолчанию (можно включить в aggressive)
quiet_inference_every_by_tf:        # Таймер inference в тихом режиме (в свечах)
  1m: 15                            # Каждые 15 минут на 1m
  5m: 8                             # Каждые 40 минут на 5m
  15m: 4                            # Каждые 60 минут на 15m

# PR-фильтр — делаем реже, чтобы не грузить процессор
pr:
  recalc_interval_minutes: 10       # Пересчёт PR каждые 10 минут (а не после каждой сделки)
  analysis_period_candles: 250      # Оставляем 250, но на телефоне можно уменьшить до 150

# Оптимизация данных
data:
  max_history_candles: 200000       # Максимум свечей на монету (≈3–4 месяца на 1m)
  resample_higher_tf: false         # Не resample 1m → higher, берём готовые с Binance

# Модель и inference
model:
  hidden_size: 32                   # Меньше, чем default (64) — легче GRU
  conv_filters: 16                  # Меньше фильтров Conv1D
  epochs: 20                        # Меньше эпох обучения/переобучения

# Дополнительная защита от перегрева
phone_safety:
  max_cpu_load: 0.70                # Если CPU >70% — пауза inference 5 мин
  max_temperature_c: 45.0           # Если температура >45°C — reduce до 3 монет + 2 TF
  auto_reduce_enabled: true         # Автоматическое снижение нагрузки
  battery_low_threshold: 0.30       # Если батарея <30% — пауза бота

# Логирование (чтобы не писать слишком много на SD-карту)
logging:
  level: "INFO"                     # Не DEBUG — меньше логов
  file_max_mb: 10                   # Максимум 10 МБ на лог-файл